{% comment %}
  This block adds a Facebook login button to your theme
  It can be added to the login page or account page
{% endcomment %}

{% assign button_text = 'facebook_login.button.login' | t %}
{% if customer %}
  {% assign button_text = 'facebook_login.button.link' | t %}
{% endif %}

<div class="facebook-login-button-container" style="margin: 20px 0;">
  <style>
    .facebook-login-button {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: {{ block.settings.button_color }};
      color: white;
      border: none;
      border-radius: {{ block.settings.button_border_radius }}px;
      padding: {{ block.settings.button_padding }}px;
      font-weight: bold;
      cursor: pointer;
      width: 100%;
      max-width: {{ block.settings.button_width }}px;
      margin: 0 auto;
      text-decoration: none;
      transition: background-color 0.3s ease;
    }
    
    .facebook-login-button:hover {
      background-color: #0d6efd;
    }
    
    .facebook-login-icon {
      margin-right: 10px;
      width: 24px;
      height: 24px;
    }
  </style>

  <a href="{{ block.settings.app_url }}/auth/facebook?shop={{ shop.permanent_domain }}" class="facebook-login-button" onclick="window.location.href=this.href; return false;">
    <svg class="facebook-login-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
      <path fill="#FFFFFF" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/>
      <path fill="#1877F2" d="M24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20S35.045,4,24,4z"/>
      <path fill="#FFFFFF" d="M27.75,35.5h-7.5V24h-3.5v-4.5h3.5v-3c0-4.95,2.05-7.5,7.75-7.5h4.5v4.5h-2.75c-2.05,0-2.25,0.75-2.25,2.25v3.75h5l-0.5,4.5h-4.5V35.5z"/>
    </svg>
    {{ button_text }}
  </a>
</div>

{% schema %}
{
  "name": "Facebook Login Button",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "app_url",
      "label": "App URL",
      "info": "The URL of your Shopify app (e.g., https://your-app-name.onrender.com)",
      "default": "https://shopify-collection-sorter.onrender.com"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Color",
      "default": "#1877F2"
    },
    {
      "type": "range",
      "id": "button_width",
      "min": 150,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Button Width",
      "default": 250
    },
    {
      "type": "range",
      "id": "button_padding",
      "min": 5,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button Padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button Border Radius",
      "default": 4
    }
  ]
}
{% endschema %}
