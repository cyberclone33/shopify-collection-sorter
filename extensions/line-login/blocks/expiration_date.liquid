{% comment %}
  Batch Information Block
  Shows batch information for products when available from metafields
{% endcomment %}

{% schema %}
{
  "name": "Batch Information",
  "target": "section",
  "templates": ["product"],
  "settings": [
    {
      "type": "header",
      "content": "Batch Information Display"
    },
    {
      "type": "checkbox",
      "id": "show_batch_id",
      "label": "Show Batch ID",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_quantity",
      "label": "Show Quantity",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_location",
      "label": "Show Location",
      "default": true
    }
  ]
}
{% endschema %}

{% assign current_variant = product.selected_or_first_available_variant %}
{% assign batch_data = current_variant.metafields.alpha_dog.expiration_data %}

{% if batch_data %}
<div id="batch-info-block" class="batch-info-block">
  <h3>Batch Information</h3>
  <div class="batch-info-details">
    {% for item in batch_data %}
      <div class="batch-info-item">
        {% if section.settings.show_batch_id %}
          <div><span class="batch-info-label">Batch ID:</span> {{ item.batchId }}</div>
        {% endif %}
        
        {% if section.settings.show_quantity %}
          <div><span class="batch-info-label">Quantity:</span> {{ item.quantity }}</div>
        {% endif %}
        
        {% if section.settings.show_location and item.location != blank and item.location != empty %}
          <div><span class="batch-info-label">Location:</span> {{ item.location }}</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>

<style>
  .batch-info-block {
    margin: 20px 0;
    padding: 15px;
    border: 1px solid #e8e8e8;
    border-radius: 5px;
    background-color: #f9f9f9;
  }
  
  .batch-info-block h3 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 16px;
    font-weight: 600;
  }
  
  .batch-info-details {
    font-size: 14px;
  }
  
  .batch-info-item {
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e8e8e8;
  }
  
  .batch-info-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
  }
  
  .batch-info-label {
    font-weight: 500;
    display: inline-block;
    min-width: 120px;
  }
</style>
{% endif %}
